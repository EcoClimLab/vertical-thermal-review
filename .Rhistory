"month" = c(rep(c(1,7), 5)))
years <- c("2016", "2017", "2018", "2019", "2020")
x <- "SCBI"
x <- "DCBI"
x <- "SCBI"
i=1
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=x,
package="basic",
check.size = FALSE, avg=30,
nCores = 2
#(use TRUE outside loop to see
#how big the dowloads are)
)
neon_data <- neon_tower[grepl(dp[,data][i], names(neon_tower))]
neon_data <- as.data.table(neon_data)
if(dp[,data][i] == "IRBT"){
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30_minute."), "",
colnames(neon_data))
} else if(dp[,data][i] == "2DWSD"){
colnames(neon_data) <-
gsub(paste0("X", dp[,data][i], "_30min."), "",
colnames(neon_data))
} else {
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30min."), "",
colnames(neon_data))
}
neon_data$verticalPosition <- as.numeric(neon_data$verticalPosition)
#filter neon_data and add day column
neon_data <- neon_data[month(startDateTime) %in% c(1,7),
.(verticalPosition,
startDateTime,
get(dp[,name][i]))]
View(neon_data)
sites <- c("BART","BONA","CLBJ","DEJU","DELA","GRSM","GUAN","HARV","JERC",
"LENO","MLBS","ORNL","OSBS","SCBI","SERC","SJER","SOAP","STEI",
"TALL","TEAK","TREE","UKFS","UNDE","WREF","YELL")
site_data <- lapply(sites, function(x){
vars <- list()
for (i in seq(along=dp[,name])){
neon_data_all <- NULL
for (j in seq(1:nrow(date))){
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=x,
package="basic",
check.size = FALSE, avg=30,
nCores = 2
#(use TRUE outside loop to see
#how big the dowloads are)
)
neon_data <- neon_tower[grepl(dp[,data][i], names(neon_tower))]
neon_data <- as.data.table(neon_data)
if(dp[,data][i] == "IRBT"){
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30_minute."), "",
colnames(neon_data))
} else if(dp[,data][i] == "2DWSD"){
colnames(neon_data) <-
gsub(paste0("X", dp[,data][i], "_30min."), "",
colnames(neon_data))
} else {
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30min."), "",
colnames(neon_data))
}
neon_data$verticalPosition <- as.numeric(neon_data$verticalPosition)
#filter neon_data and add day column
neon_data <- neon_data[month(startDateTime) %in% c(1,7),
.(verticalPosition,
startDateTime,
get(dp[,name][i]))]
names(neon_data)[3] <- dp[,name][i]
neon_data_all <- rbind(neon_data_all, neon_data)
}
vars[[i]] <- neon_data_all
}
names(vars) <- dp[,name]
return(vars)
})
date <- data.table("year" = c(rep(2019, 2)),
"month" = c(rep(c(1,7), 1)))
rm(i)
rm(x)
years <- c("2019")
sites <- c("BART","BONA","CLBJ","DEJU","DELA","GRSM","GUAN","HARV","JERC",
"LENO","MLBS","ORNL","OSBS","SCBI","SERC","SJER","SOAP","STEI",
"TALL","TEAK","TREE","UKFS","UNDE","WREF","YELL")
site_data <- lapply(sites, function(x){
vars <- list()
for (i in seq(along=dp[,name])){
neon_data_all <- NULL
for (j in seq(1:nrow(date))){
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=x,
package="basic",
check.size = FALSE, avg=30,
nCores = 2
#(use TRUE outside loop to see
#how big the dowloads are)
)
neon_data <- neon_tower[grepl(dp[,data][i], names(neon_tower))]
neon_data <- as.data.table(neon_data)
if(dp[,data][i] == "IRBT"){
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30_minute."), "",
colnames(neon_data))
} else if(dp[,data][i] == "2DWSD"){
colnames(neon_data) <-
gsub(paste0("X", dp[,data][i], "_30min."), "",
colnames(neon_data))
} else {
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30min."), "",
colnames(neon_data))
}
neon_data$verticalPosition <- as.numeric(neon_data$verticalPosition)
#filter neon_data and add day column
neon_data <- neon_data[month(startDateTime) %in% c(1,7),
.(verticalPosition,
startDateTime,
get(dp[,name][i]))]
names(neon_data)[3] <- dp[,name][i]
neon_data_all <- rbind(neon_data_all, neon_data)
}
vars[[i]] <- neon_data_all
}
names(vars) <- dp[,name]
return(vars)
})
######################################################
# Purpose: Create vertical profiles of climate variables for ForestGEO plot using NEON tower data
# Developed by: Ian McGregor, contact Anderson-Teixeira (teixeirak@si.edu)
# R version 3.5.3 - First created May 2019, updated for vertical-thermal-rv
## Aug-Sept. 2020
######################################################
library(neonUtilities)
library(data.table)
dp <- data.table(data = c("2DWSD", "RH", "SAAT", "IRBT"),
id = c("DP1.00001.001", "DP1.00098.001",
"DP1.00002.001", "DP1.00005.001"),
name = c("windSpeedMean", "RHMean",
"tempSingleMean", "bioTempMean"),
xlabs = c("Wind speed [m/s]", "RH [%]",
"Mean Air Temperature [°C]",
"Mean Infrared Biological Temperature [°C]"))
date <- data.table("year" = c(rep(2016, 2), rep(2017, 2),
rep(2018, 2), rep(2019, 2),
rep(2020, 2)),
"month" = c(rep(c(1,7), 5)))
date <- data.table("year" = c(rep(2019, 2)),
"month" = c(rep(c(1,7), 1)))
years <- c("2016", "2017", "2018", "2019", "2020")
years <- c("2019")
k <- "SCBI"
vars <- list()
for (i in seq(along=dp[,name])){
neon_data_all <- NULL
for (j in seq(1:nrow(date))){
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=k,
package="basic",
check.size = FALSE, avg=30,
nCores = 2
#(use TRUE outside loop to see
#how big the dowloads are)
)
neon_data <- neon_tower[grepl(dp[,data][i], names(neon_tower))]
neon_data <- as.data.table(neon_data)
if(dp[,data][i] == "IRBT"){
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30_minute."), "",
colnames(neon_data))
} else if(dp[,data][i] == "2DWSD"){
colnames(neon_data) <-
gsub(paste0("X", dp[,data][i], "_30min."), "",
colnames(neon_data))
} else {
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30min."), "",
colnames(neon_data))
}
neon_data$verticalPosition <- as.numeric(neon_data$verticalPosition)
#filter neon_data and add day column
neon_data <- neon_data[month(startDateTime) %in% c(1,7),
.(verticalPosition,
startDateTime,
get(dp[,name][i]))]
names(neon_data)[3] <- dp[,name][i]
neon_data_all <- rbind(neon_data_all, neon_data)
}
vars[[i]] <- neon_data_all
}
names(vars) <- dp[,name]
View(vars)
25*0.5
?loadByProduct
View(date)
paste0(date[,year], "-0", date[,month])
vars <- list()
for (i in seq(along=dp[,name])){
neon_data_all <- NULL
for (j in seq(1:nrow(date))){
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=k,
package="basic",
check.size = FALSE, avg=30,
nCores = 2,
startdate=paste0(date[,year][j], "-0",
date[,month][j]),
enddate = paste0(date[,year][j], "-0",
date[,month][j])
#(use TRUE outside loop to see
#how big the dowloads are)
)
neon_data <- neon_tower[grepl(dp[,data][i], names(neon_tower))]
neon_data <- as.data.table(neon_data)
if(dp[,data][i] == "IRBT"){
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30_minute."), "",
colnames(neon_data))
} else if(dp[,data][i] == "2DWSD"){
colnames(neon_data) <-
gsub(paste0("X", dp[,data][i], "_30min."), "",
colnames(neon_data))
} else {
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30min."), "",
colnames(neon_data))
}
neon_data$verticalPosition <- as.numeric(neon_data$verticalPosition)
#filter neon_data and add day column
neon_data <- neon_data[month(startDateTime) %in% c(1,7),
.(verticalPosition,
startDateTime,
get(dp[,name][i]))]
names(neon_data)[3] <- dp[,name][i]
neon_data_all <- rbind(neon_data_all, neon_data)
}
vars[[i]] <- neon_data_all
}
names(vars) <- dp[,name]
View(vars)
######################################################
# Purpose: Create vertical profiles of climate variables for ForestGEO plot using NEON tower data
# Developed by: Ian McGregor, contact Anderson-Teixeira (teixeirak@si.edu)
# R version 3.5.3 - First created May 2019, updated for vertical-thermal-rv
## Aug-Sept. 2020
######################################################
library(neonUtilities)
library(data.table)
dp <- data.table(data = c("2DWSD", "RH", "SAAT", "IRBT"),
id = c("DP1.00001.001", "DP1.00098.001",
"DP1.00002.001", "DP1.00005.001"),
name = c("windSpeedMean", "RHMean",
"tempSingleMean", "bioTempMean"),
xlabs = c("Wind speed [m/s]", "RH [%]",
"Mean Air Temperature [°C]",
"Mean Infrared Biological Temperature [°C]"))
dp <- data.table(data = c("2DWSD", "RH", "SAAT", "IRBT"),
id = c("DP1.00001.001", "DP1.00098.001",
"DP1.00002.001", "DP1.00005.001",
"DP1.00024.001"),
name = c("windSpeedMean", "RHMean",
"tempSingleMean", "bioTempMean",
"PAR"),
xlabs = c("Wind speed [m/s]", "RH [%]",
"Mean Air Temperature [°C]",
"Mean Infrared Biological Temperature [°C]",
"Photosynthetic Active Radiation"))
dp <- data.table(data = c("2DWSD", "RH", "SAAT", "IRBT", "PAR"),
id = c("DP1.00001.001", "DP1.00098.001",
"DP1.00002.001", "DP1.00005.001",
"DP1.00024.001"),
name = c("windSpeedMean", "RHMean",
"tempSingleMean", "bioTempMean",
"PAR"),
xlabs = c("Wind speed [m/s]", "RH [%]",
"Mean Air Temperature [°C]",
"Mean Infrared Biological Temperature [°C]",
"Photosynthetic Active Radiation"))
date <- data.table("year" = c(rep(2016, 2), rep(2017, 2),
rep(2018, 2), rep(2019, 2),
rep(2020, 2)),
"month" = c(rep(c(1,7), 5)))
date <- data.table("year" = c(rep(2019, 2)),
"month" = c(rep(c(1,7), 1)))
years <- c("2016", "2017", "2018", "2019", "2020")
years <- c("2019")
date <- data.table("year" = c(rep(2019, 2)),
"month" = c(rep(c(1,7), 1)))
years <- c("2016", "2017", "2018", "2019", "2020")
years <- c("2019")
i=6
i=5
k <- "SCBI"
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=k,
package="basic",
check.size = FALSE, avg=30,
nCores = 2,
startdate=paste0(date[,year][j], "-0",
date[,month][j]),
enddate = paste0(date[,year][j], "-0",
date[,month][j])
#(use TRUE outside loop to see
#how big the dowloads are)
)
j <- 1
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=k,
package="basic",
check.size = FALSE, avg=30,
nCores = 2,
startdate=paste0(date[,year][j], "-0",
date[,month][j]),
enddate = paste0(date[,year][j], "-0",
date[,month][j])
#(use TRUE outside loop to see
#how big the dowloads are)
)
View(neon_tower)
######################################################
# Purpose: Create vertical profiles of climate variables for ForestGEO plot using NEON tower data
# Developed by: Ian McGregor, contact Anderson-Teixeira (teixeirak@si.edu)
# R version 3.5.3 - First created May 2019, updated for vertical-thermal-rv
## Aug-Sept. 2020
######################################################
library(neonUtilities)
library(data.table)
dp <- data.table(data = c("2DWSD", "RH", "SAAT", "IRBT", "PARPAR", "SWIR"),
id = c("DP1.00001.001", "DP1.00098.001",
"DP1.00002.001", "DP1.00005.001",
"DP1.00024.001", "DP1.00023.001"),
name = c("windSpeedMean", "RHMean",
"tempSingleMean", "bioTempMean",
"PARMean", "Shortwave"),
xlabs = c("Wind speed [m/s]", "RH [%]",
"Mean Air Temperature [°C]",
"Mean Infrared Biological Temperature [°C]",
"Photosynthetic Active Radiation",
"Shortwave and longwave radiation"))
date <- data.table("year" = c(rep(2016, 2), rep(2017, 2),
rep(2018, 2), rep(2019, 2),
rep(2020, 2)),
"month" = c(rep(c(1,7), 5)))
dp <- data.table(data = c("2DWSD", "RH", "SAAT", "IRBT", "PARPAR", "SWIR"),
id = c("DP1.00001.001", "DP1.00098.001",
"DP1.00002.001", "DP1.00005.001",
"DP1.00024.001", "DP1.00023.001"),
name = c("windSpeedMean", "RHMean",
"tempSingleMean", "bioTempMean",
"PARMean", "Shortwave"),
xlabs = c("Wind speed [m/s]", "RH [%]",
"Mean Air Temperature [°C]",
"Mean Infrared Biological Temperature [°C]",
"Photosynthetic Active Radiation",
"Shortwave and longwave radiation"))
date <- data.table("year" = c(rep(2016, 2), rep(2017, 2),
rep(2018, 2), rep(2019, 2),
rep(2020, 2)),
"month" = c(rep(c(1,7), 5)))
date <- data.table("year" = c(rep(2019, 2)),
"month" = c(rep(c(1,7), 1)))
years <- c("2016", "2017", "2018", "2019", "2020")
years <- c("2019")
k <- "SCBI"
j = 1
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=k,
package="basic",
check.size = FALSE, avg=30,
nCores = 2,
startdate=paste0(date[,year][j], "-0",
date[,month][j]),
enddate = paste0(date[,year][j], "-0",
date[,month][j])
#(use TRUE outside loop to see
#how big the dowloads are)
)
i=6
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=k,
package="basic",
check.size = FALSE, avg=30,
nCores = 2,
startdate=paste0(date[,year][j], "-0",
date[,month][j]),
enddate = paste0(date[,year][j], "-0",
date[,month][j])
#(use TRUE outside loop to see
#how big the dowloads are)
)
View(neon_tower)
dp <- data.table(data = c("2DWSD", "RH", "SAAT", "IRBT", "PARPAR", "SWIR"),
id = c("DP1.00001.001", "DP1.00098.001",
"DP1.00002.001", "DP1.00005.001",
"DP1.00024.001", "DP1.00023.001"),
name = c("windSpeedMean", "RHMean",
"tempSingleMean", "bioTempMean",
"PARMean", "SLRNR_30min"),
xlabs = c("Wind speed [m/s]", "RH [%]",
"Mean Air Temperature [°C]",
"Mean Infrared Biological Temperature [°C]",
"Photosynthetic Active Radiation",
"Shortwave and longwave radiation"))
neon_data <- neon_tower[grepl(dp[,data][i], names(neon_tower))]
View(dp)
dp <- data.table(data = c("2DWSD", "RH", "SAAT", "IRBT", "PARPAR", "SLRNR_30min"),
id = c("DP1.00001.001", "DP1.00098.001",
"DP1.00002.001", "DP1.00005.001",
"DP1.00024.001", "DP1.00023.001"),
name = c("windSpeedMean", "RHMean",
"tempSingleMean", "bioTempMean",
"PARMean", "SWIR"),
xlabs = c("Wind speed [m/s]", "RH [%]",
"Mean Air Temperature [°C]",
"Mean Infrared Biological Temperature [°C]",
"Photosynthetic Active Radiation",
"Shortwave and longwave radiation"))
neon_data <- neon_tower[grepl(dp[,data][i], names(neon_tower))]
neon_data <- as.data.table(neon_data)
View(neon_data)
if(dp[,data][i] == "IRBT"){
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30_minute."), "",
colnames(neon_data))
} else if(dp[,data][i] == "2DWSD"){
colnames(neon_data) <-
gsub(paste0("X", dp[,data][i], "_30min."), "",
colnames(neon_data))
} else {
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30min."), "",
colnames(neon_data))
}
View(neon_data)
dp <- data.table(data = c("2DWSD", "RH", "SAAT", "IRBT", "PARPAR", "SLRNR"),
id = c("DP1.00001.001", "DP1.00098.001",
"DP1.00002.001", "DP1.00005.001",
"DP1.00024.001", "DP1.00023.001"),
name = c("windSpeedMean", "RHMean",
"tempSingleMean", "bioTempMean",
"PARMean", "SWIR"),
xlabs = c("Wind speed [m/s]", "RH [%]",
"Mean Air Temperature [°C]",
"Mean Infrared Biological Temperature [°C]",
"Photosynthetic Active Radiation",
"Shortwave and longwave radiation"))
neon_data <- neon_tower[grepl(dp[,data][i], names(neon_tower))]
neon_data <- as.data.table(neon_data)
if(dp[,data][i] == "IRBT"){
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30_minute."), "",
colnames(neon_data))
} else if(dp[,data][i] == "2DWSD"){
colnames(neon_data) <-
gsub(paste0("X", dp[,data][i], "_30min."), "",
colnames(neon_data))
} else {
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30min."), "",
colnames(neon_data))
}
View(neon_data)
#filter neon_data and add day column
neon_data <- neon_data[month(startDateTime) %in% c(1,7),
verticalPosition := as.numeric(verticalPosition)]
View(neon_data)
unique(neon_data[,verticalPosition])
i=5
neon_tower <-
loadByProduct(dpID=dp[,id][i],
site=k,
package="basic",
check.size = FALSE, avg=30,
nCores = 2,
startdate=paste0(date[,year][j], "-0",
date[,month][j]),
enddate = paste0(date[,year][j], "-0",
date[,month][j])
#(use TRUE outside loop to see
#how big the dowloads are)
)
neon_data <- neon_tower[grepl(dp[,data][i], names(neon_tower))]
neon_data <- as.data.table(neon_data)
View(neon_data)
if(dp[,data][i] == "IRBT"){
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30_minute."), "",
colnames(neon_data))
} else if(dp[,data][i] == "2DWSD"){
colnames(neon_data) <-
gsub(paste0("X", dp[,data][i], "_30min."), "",
colnames(neon_data))
} else {
colnames(neon_data) <-
gsub(paste0(dp[,data][i], "_30min."), "",
colnames(neon_data))
}
View(neon_data)
30*0.5
